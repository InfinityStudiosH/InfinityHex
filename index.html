<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Generador HEX Galaxia | AlonsoAliaga Dev</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet"/>
<style>
  /* Fondo galaxia con animación */
  body {
    margin: 0; padding: 0; height: 100vh;
    background: radial-gradient(circle at center, #1b2735 0%, #090a0f 100%);
    overflow-x: hidden;
    color: #fff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    transition: background-color 0.5s ease;
  }
  canvas#starfield {
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: -1;
    pointer-events: none;
  }
  h1 {
    text-align: center;
    margin-top: 20px;
    font-weight: 700;
    letter-spacing: 1.3px;
    color: #a17eff;
    text-shadow: 0 0 8px #8a44ff;
  }
  .container {
    max-width: 900px;
    margin: 30px auto;
    background: rgba(10, 10, 20, 0.85);
    border-radius: 12px;
    padding: 20px 30px 40px;
    box-shadow: 0 0 20px #5725ff99;
  }
  label {
    font-weight: 600;
  }
  input[type="color"] {
    border-radius: 8px;
    border: none;
    width: 100%;
    height: 50px;
    cursor: pointer;
    margin-bottom: 15px;
  }
  input[type="text"], textarea {
    width: 100%;
    padding: 10px;
    font-size: 18px;
    border-radius: 8px;
    border: none;
    margin-bottom: 15px;
  }
  button {
    background: #8a44ff;
    border: none;
    padding: 10px 20px;
    color: white;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #a35aff;
  }
  .output-box {
    background: #221944;
    border-radius: 10px;
    padding: 15px;
    font-family: monospace;
    font-size: 16px;
    cursor: pointer;
    user-select: all;
    margin-bottom: 20px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  .color-preview {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    margin: 5px;
    border: 2px solid #aaa;
    display: inline-block;
    cursor: pointer;
  }
  .palette-container {
    margin: 20px 0;
  }
  .palette-title {
    font-weight: 700;
    font-size: 20px;
    margin-bottom: 10px;
  }
  .palette-colors {
    display: flex;
    gap: 10px;
  }
  /* Switch Modo Claro/Oscuro */
  .switch {
    position: relative;
    display: inline-block;
    width: 50px; height: 24px;
  }
  .switch input {display:none;}
  .slider {
    position: absolute; cursor: pointer;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: #ccc; border-radius: 24px;
    transition: .4s;
  }
  .slider:before {
    position: absolute; content: "";
    height: 18px; width: 18px;
    left: 3px; bottom: 3px;
    background-color: white;
    border-radius: 50%;
    transition: .4s;
  }
  input:checked + .slider {
    background-color: #8a44ff;
  }
  input:checked + .slider:before {
    transform: translateX(26px);
  }
  /* Estilos para texto con estilos (negrita, cursiva...) */
  .text-styles label {
    margin-right: 12px;
    cursor: pointer;
  }
  .motd-preview {
    background: linear-gradient(45deg, #4a2198, #1a0a45);
    padding: 15px;
    color: white;
    border-radius: 12px;
    margin-top: 20px;
    font-size: 18px;
    font-weight: 700;
    user-select: none;
  }
</style>
</head>
<body>

<canvas id="starfield"></canvas>

<div class="container">
  <h1>Generador HEX Galaxia</h1>

  <!-- Selector principal -->
  <label for="colorPicker">Elige un color HEX:</label>
  <input type="color" id="colorPicker" value="#9a14ff" />

  <!-- Text styles -->
  <div class="text-styles">
    <label><input type="checkbox" id="bold" /> Negrita</label>
    <label><input type="checkbox" id="italic" /> Cursiva</label>
    <label><input type="checkbox" id="underline" /> Subrayado</label>
    <label><input type="checkbox" id="strike" /> Tachado</label>
  </div>

  <!-- Entrada de texto para preview -->
  <label for="textInput">Texto de ejemplo:</label>
  <input type="text" id="textInput" placeholder="Escribe algo para ver el color aplicado..." />

  <!-- Preview en vivo -->
  <div id="livePreview" class="motd-preview">Aquí se muestra tu texto con estilo y color</div>

  <!-- Salidas -->
  <label>HEX:</label>
  <div id="hexOutput" class="output-box" title="Haz clic para copiar"></div>

  <label>RGB:</label>
  <div id="rgbOutput" class="output-box" title="Haz clic para copiar"></div>

  <label>HSL:</label>
  <div id="hslOutput" class="output-box" title="Haz clic para copiar"></div>

  <label>Código Minecraft (Legacy):</label>
  <div id="minecraftOutput" class="output-box" title="Haz clic para copiar"></div>

  <label>Código Minecraft (§x):</label>
  <div id="minecraftNewOutput" class="output-box" title="Haz clic para copiar"></div>

  <label>Código Discord Embed:</label>
  <div id="discordOutput" class="output-box" title="Haz clic para copiar"></div>

  <!-- Generador de gradientes -->
  <h3>Generador de gradientes HEX</h3>
  <label for="startGradient">Color Inicio:</label>
  <input type="color" id="startGradient" value="#9a14ff" />
  <label for="endGradient">Color Fin:</label>
  <input type="color" id="endGradient" value="#14ffcc" />
  <label for="stepsGradient">Número de pasos:</label>
  <input type="number" id="stepsGradient" min="2" max="30" value="5" />
  <button id="generateGradientBtn">Generar Gradiente</button>

  <div id="gradientOutput" style="margin-top: 10px; display:flex; flex-wrap: wrap; gap: 10px;"></div>

  <!-- Paletas galácticas predefinidas -->
  <h3>Paletas galácticas</h3>
  <div class="palette-container" id="palettes"></div>

  <!-- Modo oscuro/claro -->
  <h3>Modo oscuro / claro</h3>
  <label class="switch">
    <input type="checkbox" id="modeToggle" />
    <span class="slider"></span>
  </label>

  <!-- Conversor inverso -->
  <h3>Conversor inverso (HEX a RGB/HSL)</h3>
  <input type="text" id="reverseInput" placeholder="#abcdef" maxlength="7" />
  <button id="convertBtn">Convertir</button>

  <div id="reverseOutput" style="margin-top: 15px; font-family: monospace;"></div>

</div>

<script>
  // Animación de estrellas en canvas
  const canvas = document.getElementById('starfield');
  const ctx = canvas.getContext('2d');
  let stars = [];
  let w, h;

  function random(min, max) {
    return Math.random() * (max - min) + min;
  }

  function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  class Star {
    constructor() {
      this.reset();
    }
    reset() {
      this.x = random(0, w);
      this.y = random(0, h);
      this.radius = random(0.5, 1.5);
      this.alpha = random(0.1, 1);
      this.alphaDirection = random() > 0.5 ? 1 : -1;
      this.alphaSpeed = random(0.002, 0.01);
    }
    update() {
      this.alpha += this.alphaSpeed * this.alphaDirection;
      if (this.alpha <= 0.1 || this.alpha >= 1) this.alphaDirection *= -1;
    }
    draw() {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255,255,255,${this.alpha.toFixed(2)})`;
      ctx.fill();
    }
  }

  for (let i = 0; i < 150; i++) {
    stars.push(new Star());
  }

  function animate() {
    ctx.clearRect(0, 0, w, h);
    stars.forEach(s => {
      s.update();
      s.draw();
    });
    requestAnimationFrame(animate);
  }
  animate();

  // Función para convertir HEX a RGB
  function hexToRgb(hex) {
    hex = hex.replace(/^#/, '');
    if (hex.length === 3) {
      hex = hex.split('').map(c => c + c).join('');
    }
    const bigint = parseInt(hex, 16);
    const r = (bigint >> 16) & 255;
    const g = (bigint >> 8) & 255;
    const b = bigint & 255;
    return { r, g, b };
  }
  // Función para convertir RGB a HSL
  function rgbToHsl(r, g, b) {
    r /= 255; g /= 255; b /= 255;
    const max = Math.max(r, g, b), min = Math.min(r, g, b);
    let h, s, l = (max + min) / 2;
    if (max === min) h = s = 0;
    else {
      const d = max - min;
      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
      switch (max) {
        case r: h = (g - b) / d + (g < b ? 6 : 0); break;
        case g: h = (b - r) / d + 2; break;
        case b: h = (r - g) / d + 4; break;
      }
      h /= 6;
    }
    return {
      h: Math.round(h * 360),
      s: Math.round(s * 100),
      l: Math.round(l * 100)
    };
  }
  // Formatea HSL a string
  function hslToString(hsl) {
    return `hsl(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`;
  }

  // Actualiza salidas al cambiar color o texto o estilos
  function updateOutputs() {
    const color = document.getElementById('colorPicker').value;
    const rgb = hexToRgb(color);
    const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);

    // Formatos
    document.getElementById('hexOutput').textContent = color.toUpperCase();
    document.getElementById('rgbOutput').textContent = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
    document.getElementById('hslOutput').textContent = hslToString(hsl);

    // Minecraft Legacy (código §)
    // Mapea hex en formato §x§R§R§G§G§B§B
    let mcLegacy = "§x";
    for (const c of color.slice(1)) {
      mcLegacy += `§${c}`;
    }
    document.getElementById('minecraftNewOutput').textContent = mcLegacy;

    // Minecraft Legacy (solo § + letra/número cercano) - no oficial, pero comúnmente usado:
    // Lo dejamos vacío para evitar confusión
    document.getElementById('minecraftOutput').textContent = "(No soportado en este modo)";

    // Discord embed (formato RGB decimal en hexadecimal)
    document.getElementById('discordOutput').textContent = color;

    updateLivePreview();
  }

  // Actualiza preview de texto con estilos y color
  function updateLivePreview() {
    const text = document.getElementById('textInput').value || "Aquí se muestra tu texto con estilo y color";
    const color = document.getElementById('colorPicker').value;
    const bold = document.getElementById('bold').checked;
    const italic = document.getElementById('italic').checked;
    const underline = document.getElementById('underline').checked;
    const strike = document.getElementById('strike').checked;

    const preview = document.getElementById('livePreview');
    preview.style.color = color;

    // Aplica estilos CSS según checkboxes
    preview.style.fontWeight = bold ? '700' : 'normal';
    preview.style.fontStyle = italic ? 'italic' : 'normal';
    preview.style.textDecoration = '';
    if (underline) preview.style.textDecoration += ' underline';
    if (strike) preview.style.textDecoration += ' line-through';

    preview.textContent = text;
  }

  // Copiar al portapapeles
  function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
      alert("Texto copiado al portapapeles: " + text);
    }).catch(() => {
      alert("Error al copiar");
    });
  }

  // Eventos para copiar al hacer click en outputs
  ['hexOutput','rgbOutput','hslOutput','minecraftOutput','minecraftNewOutput','discordOutput'].forEach(id => {
    document.getElementById(id).addEventListener('click', e => {
      copyToClipboard(e.target.textContent);
    });
  });

  // Actualizar outputs y preview al cambiar color o texto o estilos
  document.getElementById('colorPicker').addEventListener('input', updateOutputs);
  ['textInput','bold','italic','underline','strike'].forEach(id => {
    document.getElementById(id).addEventListener('input', updateLivePreview);
    document.getElementById(id).addEventListener('change', updateLivePreview);
  });
  document.getElementById('textInput').addEventListener('input', updateLivePreview);

  // Generador de gradientes HEX
  function interpolateColor(color1, color2, factor) {
    const c1 = hexToRgb(color1);
    const c2 = hexToRgb(color2);
    const r = Math.round(c1.r + factor * (c2.r - c1.r));
    const g = Math.round(c1.g + factor * (c2.g - c1.g));
    const b = Math.round(c1.b + factor * (c2.b - c1.b));
    return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;
  }
  document.getElementById('generateGradientBtn').addEventListener('click', () => {
    const start = document.getElementById('startGradient').value;
    const end = document.getElementById('endGradient').value;
    let steps = parseInt(document.getElementById('stepsGradient').value);
    if (isNaN(steps) || steps < 2) steps = 2;
    if (steps > 30) steps = 30;

    const container = document.getElementById('gradientOutput');
    container.innerHTML = '';

    for(let i = 0; i < steps; i++) {
      const factor = i / (steps - 1);
      const color = interpolateColor(start, end, factor);
      const div = document.createElement('div');
      div.className = 'color-preview';
      div.style.backgroundColor = color;
      div.title = color;
      div.addEventListener('click', () => {
        copyToClipboard(color);
      });
      container.appendChild(div);
    }
  });

  // Paletas galácticas predefinidas
  const palettes = {
    "Nebulosa Morada": ['#a17eff','#8a44ff','#592cff','#3f1ecf','#2d0f8e'],
    "Galaxia Azul": ['#00c6ff','#0072ff','#001f4d','#004e92','#00b0ff'],
    "Estrellas Verdes": ['#4fff72','#2ccc56','#167a2b','#0f4f18','#002e08'],
    "Rojo Cósmico": ['#ff4a4a','#ff1f1f','#b00000','#7f0000','#3f0000'],
    "Aurora Boreal": ['#14ffcc','#00bfa5','#006953','#003927','#001a11'],
  };

  const paletteContainer = document.getElementById('palettes');
  for (const name in palettes) {
    const paletteDiv = document.createElement('div');
    paletteDiv.innerHTML = `<div class="palette-title">${name}</div>`;
    const colorsDiv = document.createElement('div');
    colorsDiv.className = 'palette-colors';

    palettes[name].forEach(color => {
      const c = document.createElement('div');
      c.className = 'color-preview';
      c.style.backgroundColor = color;
      c.title = color;
      c.addEventListener('click', () => {
        document.getElementById('colorPicker').value = color;
        updateOutputs();
      });
      colorsDiv.appendChild(c);
    });

    paletteDiv.appendChild(colorsDiv);
    paletteContainer.appendChild(paletteDiv);
  }

  // Modo oscuro / claro automático
  const modeToggle = document.getElementById('modeToggle');
  function setDarkMode(enabled) {
    if (enabled) {
      document.body.style.background = '#090a0f';
      document.body.style.color = '#ddd';
      document.querySelector('.container').style.background = 'rgba(20,20,35,0.95)';
    } else {
      document.body.style.background = 'radial-gradient(circle at center, #1b2735 0%, #090a0f 100%)';
      document.body.style.color = '#fff';
      document.querySelector('.container').style.background = 'rgba(10, 10, 20, 0.85)';
    }
  }

  // Inicializar modo según preferencia sistema
  if(window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    modeToggle.checked = true;
    setDarkMode(true);
  }

  modeToggle.addEventListener('change', () => {
    setDarkMode(modeToggle.checked);
  });

  // Conversor inverso de HEX
  document.getElementById('convertBtn').addEventListener('click', () => {
    const hex = document.getElementById('reverseInput').value.trim();
    if(!/^#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$/.test(hex)) {
      document.getElementById('reverseOutput').textContent = 'Introduce un código HEX válido (ej: #aabbcc)';
      return;
    }
    const rgb = hexToRgb(hex);
    const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);

    // Contraste según luminancia (WCAG simple)
    function luminance(r,g,b) {
      const a = [r,g,b].map(v => {
        v /= 255;
        return v <= 0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055,2.4);
      });
      return 0.2126*a[0] + 0.7152*a[1] + 0.0722*a[2];
    }
    const lum = luminance(rgb.r, rgb.g, rgb.b);
    const textColor = lum > 0.5 ? '#000000' : '#FFFFFF';

    document.getElementById('reverseOutput').innerHTML =
      `<div style="background:${hex}; color:${textColor}; padding: 10px; border-radius: 8px;">
      RGB: rgb(${rgb.r}, ${rgb.g}, ${rgb.b})<br/>
      HSL: ${hslToString(hsl)}
      </div>`;
  });

  // Inicialización
  updateOutputs();
  updateLivePreview();

</script>

</body>
</html>

